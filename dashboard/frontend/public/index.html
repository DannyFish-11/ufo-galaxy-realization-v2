<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UFO¬≥ Galaxy - AI Êô∫ËÉΩ‰ΩìÊéßÂà∂‰∏≠ÂøÉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;700&display=swap');
        
        * {
            font-family: 'Noto Serif SC', serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
        }
        
        .scroll-paper {
            background: linear-gradient(to right, #f5f0e6, #faf8f3, #f5f0e6);
            box-shadow: -5px 0 20px rgba(0,0,0,0.3), 5px 0 20px rgba(0,0,0,0.3);
        }
        
        .ink-border {
            background: linear-gradient(to bottom, #333, #000, #333);
        }
        
        .glow-text {
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .status-dot {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .node-card {
            transition: all 0.3s ease;
        }
        
        .node-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(59, 130, 246, 0.2);
        }
        
        .chat-bubble-user {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .chat-bubble-ai {
            background: linear-gradient(135deg, #374151, #1f2937);
        }
    </style>
</head>
<body class="text-gray-100 min-h-screen">
    <div id="app">
        <!-- ‰∏ªÂÆπÂô® -->
        <div class="flex h-screen">
            <!-- Â∑¶‰æßÈù¢Êùø - Á≥ªÁªüÁä∂ÊÄÅ -->
            <div class="w-80 bg-gray-900 border-r border-gray-800 flex flex-col">
                <!-- Á≥ªÁªüÊ†áÈ¢ò -->
                <div class="p-4 border-b border-gray-800">
                    <div class="flex items-center space-x-3">
                        <div class="w-3 h-3 rounded-full status-dot" :class="systemStatus === 'healthy' ? 'bg-green-500' : 'bg-red-500'"></div>
                        <h1 class="text-xl font-bold glow-text">UFO¬≥ GALAXY</h1>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">L4 Á∫ßËá™‰∏ªÊÄßÊô∫ËÉΩÁ≥ªÁªü</p>
                </div>
                
                <!-- Á≥ªÁªüÊåáÊ†á -->
                <div class="p-4 space-y-3">
                    <div class="bg-gray-800 rounded-lg p-3">
                        <div class="text-gray-400 text-xs">ËäÇÁÇπÊï∞Èáè</div>
                        <div class="text-2xl font-bold text-blue-400">{{ nodes.length }}</div>
                    </div>
                    <div class="bg-gray-800 rounded-lg p-3">
                        <div class="text-gray-400 text-xs">ËÆæÂ§áËøûÊé•</div>
                        <div class="text-2xl font-bold text-green-400">{{ devices.length }}</div>
                    </div>
                    <div class="bg-gray-800 rounded-lg p-3">
                        <div class="text-gray-400 text-xs">Agent Áä∂ÊÄÅ</div>
                        <div class="text-2xl font-bold text-purple-400">{{ agentStatus }}</div>
                    </div>
                </div>
                
                <!-- ËäÇÁÇπÂàóË°® -->
                <div class="flex-1 overflow-auto p-4">
                    <h3 class="text-sm font-semibold text-gray-400 mb-2">ËäÇÁÇπÁä∂ÊÄÅ</h3>
                    <div class="space-y-2">
                        <div v-for="node in nodes.slice(0, 10)" :key="node.id" 
                             class="node-card bg-gray-800 rounded-lg p-2 flex items-center justify-between">
                            <div>
                                <div class="text-sm font-medium">{{ node.name }}</div>
                                <div class="text-xs text-gray-500">{{ node.id }}</div>
                            </div>
                            <div class="w-2 h-2 rounded-full" :class="node.status === 'running' ? 'bg-green-500' : 'bg-gray-500'"></div>
                        </div>
                    </div>
                </div>
                
                <!-- ËÆæÂ§áÂàóË°® -->
                <div class="p-4 border-t border-gray-800">
                    <h3 class="text-sm font-semibold text-gray-400 mb-2">Â∑≤ËøûÊé•ËÆæÂ§á</h3>
                    <div class="space-y-2">
                        <div v-for="device in devices" :key="device.id" 
                             class="bg-gray-800 rounded-lg p-2 flex items-center justify-between">
                            <div>
                                <div class="text-sm font-medium">{{ device.name }}</div>
                                <div class="text-xs text-gray-500">{{ device.type }}</div>
                            </div>
                            <div class="w-2 h-2 rounded-full bg-green-500"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ‰∏≠Èó¥Èù¢Êùø - ‰π¶Ê≥ïÂç∑ËΩ¥ÂºèËÅäÂ§©ÁïåÈù¢ -->
            <div class="flex-1 flex flex-col">
                <!-- Âç∑ËΩ¥ÂÆπÂô® -->
                <div class="flex-1 flex">
                    <!-- Â∑¶‰æßÂ¢®ËøπËæπÊ°Ü -->
                    <div class="w-2 ink-border"></div>
                    
                    <!-- Âç∑ËΩ¥‰∏ª‰Ωì -->
                    <div class="flex-1 scroll-paper p-6 overflow-auto">
                        <!-- ËÅäÂ§©Ê∂àÊÅØ -->
                        <div class="space-y-4">
                            <div v-for="msg in messages" :key="msg.id" 
                                 class="flex" :class="msg.role === 'user' ? 'justify-end' : 'justify-start'">
                                <div class="max-w-2xl rounded-lg p-4 text-gray-900"
                                     :class="msg.role === 'user' ? 'chat-bubble-user text-white' : 'chat-bubble-ai text-gray-100'">
                                    <div class="whitespace-pre-wrap">{{ msg.content }}</div>
                                    <div class="text-xs mt-2 opacity-50">{{ formatTime(msg.timestamp) }}</div>
                                </div>
                            </div>
                            
                            <!-- Âä†ËΩΩÊåáÁ§∫Âô® -->
                            <div v-if="isLoading" class="flex justify-start">
                                <div class="chat-bubble-ai rounded-lg p-4">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce"></div>
                                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Âè≥‰æßÂ¢®ËøπËæπÊ°Ü -->
                    <div class="w-2 ink-border"></div>
                </div>
                
                <!-- ËæìÂÖ•Âå∫Âüü -->
                <div class="p-4 bg-gray-900 border-t border-gray-800">
                    <div class="flex space-x-4">
                        <input v-model="inputText" @keyup.enter="sendMessage"
                               type="text" placeholder="ËæìÂÖ•ÂëΩ‰ª§ÊàñÈóÆÈ¢ò..."
                               class="flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500">
                        <button @click="sendMessage" 
                                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium">
                            ÂèëÈÄÅ
                        </button>
                        <button @click="startVoiceInput"
                                class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-3 rounded-lg">
                            üé§
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Âè≥‰æßÈù¢Êùø - Agent Â∑•ÂéÇÂíåÁü•ËØÜÂ∫ì -->
            <div class="w-80 bg-gray-900 border-l border-gray-800 flex flex-col">
                <!-- Agent Â∑•ÂéÇ -->
                <div class="p-4 border-b border-gray-800">
                    <h3 class="text-sm font-semibold text-gray-400 mb-3">ü§ñ Agent Â∑•ÂéÇ</h3>
                    <div class="space-y-2">
                        <div v-for="agent in agents" :key="agent.id" 
                             class="bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center justify-between">
                                <div class="text-sm font-medium">{{ agent.name }}</div>
                                <div class="text-xs px-2 py-1 rounded" 
                                     :class="agent.status === 'active' ? 'bg-green-900 text-green-400' : 'bg-gray-700 text-gray-400'">
                                    {{ agent.status }}
                                </div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">{{ agent.task }}</div>
                        </div>
                    </div>
                    <button class="w-full mt-3 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg text-sm">
                        + ÂàõÂª∫Êñ∞ Agent
                    </button>
                </div>
                
                <!-- Áü•ËØÜÂ∫ì -->
                <div class="p-4 border-b border-gray-800">
                    <h3 class="text-sm font-semibold text-gray-400 mb-3">üìö Áü•ËØÜÂ∫ì</h3>
                    <div class="space-y-2">
                        <div v-for="kb in knowledgeBases" :key="kb.id" 
                             class="bg-gray-800 rounded-lg p-3">
                            <div class="text-sm font-medium">{{ kb.name }}</div>
                            <div class="text-xs text-gray-500">{{ kb.documents }} ÊñáÊ°£</div>
                        </div>
                    </div>
                </div>
                
                <!-- Â≠¶‰π†ËøõÂ∫¶ -->
                <div class="p-4 flex-1">
                    <h3 class="text-sm font-semibold text-gray-400 mb-3">üìà Â≠¶‰π†ËøõÂ∫¶</h3>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-xs mb-1">
                                <span>Êìç‰ΩúÊ®°ÂºèÂ≠¶‰π†</span>
                                <span>{{ learningProgress.operations }}%</span>
                            </div>
                            <div class="bg-gray-800 rounded-full h-2">
                                <div class="bg-blue-500 h-2 rounded-full" :style="{ width: learningProgress.operations + '%' }"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs mb-1">
                                <span>Áî®Êà∑ÂÅèÂ•ΩÂ≠¶‰π†</span>
                                <span>{{ learningProgress.preferences }}%</span>
                            </div>
                            <div class="bg-gray-800 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" :style="{ width: learningProgress.preferences + '%' }"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs mb-1">
                                <span>Â∫îÁî®ÈÄÇÈÖçÂ≠¶‰π†</span>
                                <span>{{ learningProgress.apps }}%</span>
                            </div>
                            <div class="bg-gray-800 rounded-full h-2">
                                <div class="bg-purple-500 h-2 rounded-full" :style="{ width: learningProgress.apps + '%' }"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const { createApp, ref, onMounted } = Vue;
        
        createApp({
            setup() {
                const systemStatus = ref('healthy');
                const agentStatus = ref('Active');
                const inputText = ref('');
                const isLoading = ref(false);
                
                const nodes = ref([
                    { id: 'Node_00', name: 'StateMachine', status: 'running' },
                    { id: 'Node_01', name: 'OneAPI', status: 'running' },
                    { id: 'Node_02', name: 'Tasker', status: 'running' },
                    { id: 'Node_04', name: 'Router', status: 'running' },
                    { id: 'Node_50', name: 'Transformer', status: 'running' },
                    { id: 'Node_70', name: 'AutonomousLearning', status: 'running' },
                    { id: 'Node_71', name: 'MultiDeviceCoord', status: 'running' },
                    { id: 'Node_80', name: 'MemorySystem', status: 'running' },
                    { id: 'Node_110', name: 'SmartOrchestrator', status: 'running' },
                    { id: 'Node_118', name: 'NodeFactory', status: 'running' },
                ]);
                
                const devices = ref([]);
                const messages = ref([
                    { id: '1', role: 'assistant', content: '‰Ω†Â•ΩÔºÅÊàëÊòØ UFO Galaxy Êô∫ËÉΩ‰Ωì„ÄÇ\n\nÊàëÂèØ‰ª•Â∏Æ‰Ω†Ôºö\n‚Ä¢ ÊéßÂà∂ÊâãÊú∫„ÄÅÂπ≥Êùø„ÄÅÁîµËÑëÁ≠âËÆæÂ§á\n‚Ä¢ ÊâßË°åÂ§çÊùÇ‰ªªÂä°\n‚Ä¢ ÂõûÁ≠îÈóÆÈ¢ò\n‚Ä¢ Ëá™‰∏ªÂ≠¶‰π†ÂíåÁºñÁ®ã\n\nËØ∑ÂëäËØâÊàë‰Ω†ÊÉ≥ÂÅö‰ªÄ‰πàÔºü', timestamp: Date.now() }
                ]);
                
                const agents = ref([
                    { id: '1', name: '‰∏ªÊéß Agent', status: 'active', task: 'Á≠âÂæÖÊåá‰ª§' },
                    { id: '2', name: 'Â≠¶‰π† Agent', status: 'active', task: 'ÂàÜÊûêÁî®Êà∑Ë°å‰∏∫' },
                    { id: '3', name: 'ËÆæÂ§á Agent', status: 'idle', task: 'ÁõëÊéßËÆæÂ§áÁä∂ÊÄÅ' },
                ]);
                
                const knowledgeBases = ref([
                    { id: '1', name: 'Êìç‰ΩúÁü•ËØÜÂ∫ì', documents: 156 },
                    { id: '2', name: 'ËÆæÂ§áÁü•ËØÜÂ∫ì', documents: 89 },
                    { id: '3', name: 'Áî®Êà∑ÂÅèÂ•ΩÂ∫ì', documents: 234 },
                ]);
                
                const learningProgress = ref({
                    operations: 78,
                    preferences: 65,
                    apps: 42
                });
                
                const formatTime = (timestamp) => {
                    return new Date(timestamp).toLocaleTimeString();
                };
                
                const sendMessage = async () => {
                    if (!inputText.value.trim()) return;
                    
                    const userMessage = {
                        id: Date.now().toString(),
                        role: 'user',
                        content: inputText.value,
                        timestamp: Date.now()
                    };
                    messages.value.push(userMessage);
                    
                    const query = inputText.value;
                    inputText.value = '';
                    isLoading.value = true;
                    
                    try {
                        // Ë∞ÉÁî®ÂêéÁ´Ø API
                        const response = await axios.post('/api/v1/chat', {
                            message: query,
                            device_id: 'web_dashboard',
                            context: messages.value.slice(-5).map(m => ({
                                role: m.role,
                                content: m.content
                            }))
                        });
                        
                        const aiMessage = {
                            id: (Date.now() + 1).toString(),
                            role: 'assistant',
                            content: response.data.response || response.data.message || 'Â∑≤Êî∂Âà∞Êåá‰ª§ÔºåÊ≠£Âú®Â§ÑÁêÜ...',
                            timestamp: Date.now()
                        };
                        messages.value.push(aiMessage);
                    } catch (error) {
                        console.error('API Error:', error);
                        const errorMessage = {
                            id: (Date.now() + 1).toString(),
                            role: 'assistant',
                            content: 'Êä±Ê≠âÔºåËøûÊé•ÂêéÁ´ØÊúçÂä°Êó∂Âá∫Èîô„ÄÇËØ∑Á°Æ‰øùÂêéÁ´ØÊúçÂä°Ê≠£Âú®ËøêË°å„ÄÇ\n\nÂêØÂä®ÂëΩ‰ª§: python main.py',
                            timestamp: Date.now()
                        };
                        messages.value.push(errorMessage);
                    }
                    
                    isLoading.value = false;
                };
                
                const startVoiceInput = () => {
                    alert('ËØ≠Èü≥ËæìÂÖ•ÂäüËÉΩÂºÄÂèë‰∏≠...');
                };
                
                onMounted(async () => {
                    // Âä†ËΩΩËÆæÂ§áÂàóË°®
                    try {
                        const response = await axios.get('/api/v1/devices');
                        devices.value = response.data.devices || [];
                    } catch (error) {
                        console.log('Could not load devices');
                    }
                });
                
                return {
                    systemStatus,
                    agentStatus,
                    inputText,
                    isLoading,
                    nodes,
                    devices,
                    messages,
                    agents,
                    knowledgeBases,
                    learningProgress,
                    formatTime,
                    sendMessage,
                    startVoiceInput
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
