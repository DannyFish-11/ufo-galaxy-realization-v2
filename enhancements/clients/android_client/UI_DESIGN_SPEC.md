# UFO³ Galaxy 安卓端 UI/UX 设计规范 v2.1

**作者:** Manus AI
**日期:** 2026-01-22
**目标:** 融合“灵动岛”的交互与“极简极客”的视觉，打造独特、高效、美观的安卓客户端体验。

---

## 1. 核心设计理念

### 1.1. 双模式融合 (Dual-Mode Integration)

我们将创建两种核心 UI 模式，并使其无缝融合：

1.  **灵动岛模式 (Dynamic Island Mode):** 作为常驻的、非侵入式的系统入口和状态监视器。它平时以极简形态存在，在接收到信息或执行任务时，会以流畅的动画展开，提供关键信息和快捷操作。

2.  **极客终端模式 (Geek Terminal Mode):** 作为功能齐全的主交互界面。当灵动岛完全展开后，呈现此模式。它继承并优化了现有的黑白渐变风格，提供丰富的命令行式交互体验。

### 1.2. 设计原则

*   **信息驱动 (Information-Driven):** UI 的形态和内容由当前系统状态和信息流决定。
*   **流畅自然 (Fluid & Natural):** 所有状态转换和动画都应基于物理模型，感觉平滑、有弹性、不生硬。
*   **极简高效 (Minimalist & Efficient):** 只在需要时呈现必要信息，避免信息过载。视觉元素服务于功能，而非纯粹装饰。
*   **深度定制 (Deeply Customizable):** 允许用户对主题、字体、动画速度等进行微调，满足极客用户的个性化需求。

---

## 2. 灵动岛模式 (Dynamic Island Mode) 设计

灵动岛是用户与 UFO³ Galaxy 交互的起点和终点。

### 2.1. 三种核心状态

1.  **折叠态 (Collapsed State):**
    *   **形态:** 一个紧凑的黑色“药丸”形状，悬浮在屏幕顶部或边缘。
    *   **内容:** 内部仅包含一个微妙的、呼吸灯效果的几何 Logo（例如一个简化的 UFO 轮廓或星系旋臂），颜色代表系统状态（绿色-在线，红色-离线，蓝色-执行中）。
    *   **交互:**
        *   **单击:** 展开为“概览态”。
        *   **长按:** 触发拖动，可以移动到屏幕边缘吸附。
        *   **拖拽至屏幕底部:** 关闭悬浮窗服务。

2.  **概览态 (Compact-Expanded State):**
    *   **形态:** “药丸”向两侧平滑展开，宽度增加，展示更多信息。
    *   **内容:**
        *   左侧：显示当前任务的图标和简短描述（例如：“代码生成中...”、“获取天气...”、“空闲”）。
        *   右侧：显示任务进度、关键结果或一个波形/频谱动画（用于语音输入或思考状态）。
    *   **交互:**
        *   **单击:** 完全展开为“极客终端模式”。
        *   **向内滑动:** 收起为“折叠态”。

3.  **通知态 (Notification State):**
    *   **形态:** 当系统有重要通知（例如任务完成、需要用户输入）时，灵动岛会短暂地变形、放大，并伴有轻微的震动和声音提示。
    *   **内容:** 显示通知的核心文本，例如“任务‘报告生成’已完成”或“需要您授权登录”。
    *   **交互:**
        *   **单击:** 跳转到相关应用或展开到“极客终端模式”并显示详细信息。
        *   **自动收缩:** 几秒钟后自动恢复到之前的状态。

### 2.2. 动画设计

*   **材质:** 使用 `spring` (弹性) 物理动画，而不是固定的 `duration` (时长) 动画。
*   **效果:** 动画应具有轻微的“拉伸”和“回弹”效果，模拟柔软、有机的物体。
*   **连续性:** 所有状态转换必须是连续的。例如，从“折叠态”到“概览态”的展开，不是简单的出现/消失，而是平滑的形变过程。

---

## 3. 极客终端模式 (Geek Terminal Mode) 优化

这是功能的核心承载区，在现有基础上进行深度优化。

### 3.1. 视觉风格优化

1.  **高级渐变 (Advanced Gradient):**
    *   背景从纯黑 (`#000000`) 到深灰 (`#1A1A1A`) 的渐变保持不变，但增加一个从左上角到右下角的、非常微弱的径向光晕效果，模拟老式 CRT 显示器的辉光。

2.  **扫描线效果 (Scanline Effect):**
    *   在背景上叠加一层极细、半透明的水平扫描线纹理，进一步增强复古终端的感觉。

3.  **辉光与阴影 (Glow & Shadow):**
    *   所有活动文本（如光标、可点击链接）和图标都应带有轻微的“辉光”效果 (`DropShadow`)，颜色与元素本身一致。
    *   窗口边缘和元素之间使用更柔和的阴影，增加层次感。

### 3.2. 组件设计优化

1.  **标题栏 (Header):**
    *   **状态指示器:** 从简单的圆形变成一个更复杂的几何图形，内部有动画效果。例如，一个旋转的立方体或脉冲的能量核心。
    *   **标题文本:** 字体保持 `MONOSPACE`，但增加一个打字机效果的动画，在窗口初次加载时逐字显示 “UFO³ GALAXY”。

2.  **输入区 (Input Area):**
    *   **命令行提示符:** 在输入框前增加一个经典的 `>` 或 `$` 符号，并带有一个闪烁的光标，模拟真实的终端。
    *   **按钮:** “发送”和“语音”按钮的图标进行重新设计，采用更锐利、更具科技感的线条。按钮按下时，有内发光和轻微缩放的动画。

3.  **历史记录区 (History Area):**
    *   **语法高亮:** 对历史记录中的特定内容（如用户输入、系统响应、错误信息、代码块）进行不同颜色和样式的渲染。
        *   `[USER]:` - 亮白色
        *   `[SYSTEM]:` - 科技蓝 (`#00BFFF`)
        *   `[ERROR]:` - 警告红 (`#FF4500`)
        *   代码块: 采用类似 VS Code 的 `Monokai` 主题进行高亮。
    *   **时间戳:** 每条消息前都带上 `[HH:mm:ss]` 格式的时间戳，颜色为深灰色。

### 3.3. 交互动画

*   **消息加载:** 系统响应不再是瞬间出现，而是以打字机动画或淡入效果逐行显示，模拟思考和生成过程。
*   **滚动:** 滚动历史记录时，顶部和底部应有渐变蒙版，暗示还有更多内容。
*   **折叠/展开:** 窗口折叠时，内容（输入区、历史区）不是简单消失，而是向上平滑滚动并淡出，反之亦然。

---

## 4. 技术实现要点

*   **灵动岛:** 使用 `WindowManager` 创建一个 `TYPE_APPLICATION_OVERLAY` 类型的悬浮窗。UI 本体使用 `Compose` 或自定义 `View` 实现，以便于绘制复杂图形和实现流畅动画。
*   **动画:** 大量使用 `AndroidX` 的 `DynamicAnimation` 库（特别是 `SpringAnimation`）来实现物理动画效果。
*   **UI 框架:** 推荐使用 `Jetpack Compose` 进行 UI 重构，其声明式特性非常适合构建这种动态、状态驱动的界面。
*   **性能:** 动画和自定义绘制需要高度优化，避免过度绘制和卡顿。在低端设备上提供一个“低功耗模式”，禁用部分复杂动画。
*   **节点推送:** 使用 `WebSocket` 或 `gRPC` 与后端的 `Galaxy Gateway` 建立长连接，实时接收和发送节点信息。

---

## 5. 下一步计划

1.  **原型验证:** 使用 `Figma` 或 `ProtoPie` 制作高保真交互原型，验证动画和交互流程的可行性。
2.  **代码重构:** 将现有的 `View` 系统逐步迁移到 `Jetpack Compose`。
3.  **组件开发:** 优先开发“灵动岛”的核心组件及其三种状态的切换逻辑。
4.  **风格实现:** 将优化后的“极客终端”视觉风格应用到 `Compose` 组件中。
5.  **API 对接:** 实现与 `Galaxy Gateway` 的 `WebSocket` 通信，完成节点推送和指令执行的闭环。
6.  **测试与迭代:** 在不同设备和安卓版本上进行广泛测试，收集反馈并持续优化。
